---
title: "Final project: Group 1"
format:
  html:
    embed-resources: true
editor: visual
---

# Members

-   Anna Lifousi (`s232979`)
-   Jordan Sylvester Fernandes (`s222497`)
-   Manuel Arcieri (`s230158`)
-   Quim Bech Vilaseca (`s233374`)
-   Xavier Vi√±as Margalef (`s233532`)

# Load data

## Load libraries

```{r}
#| echo: true
#| message: true

library("broom")
library("patchwork")
library("purrr")
library("readr")
library("stringr")
library("table1")
library("tidyverse")
```

## Download diabetes dataset

```{r}
#| echo: true
#| message: true

raw_dir <- "../_raw/"
data_file <- "diabetes.csv"
data_loc <- "https://r4bds.trifogli.rip/"

if (!dir.exists(raw_dir)) {
    dir.create(path = raw_dir)
}

if(!file.exists(str_c(raw_dir, data_file))){
  download.file(
    url = str_c(data_loc, data_file),
    destfile = str_c(raw_dir, data_file))
}
```

## Save dataset in data as tsv
```{r}
data <- read_csv("../_raw/diabetes.csv")

data_dir <- '../data/'

if (!dir.exists(data_dir)) {
    dir.create(path = data_dir)
}

write_tsv(data, file = str_c(data_dir, '01_dat_load.tsv.gz'))
```


# Clean data

```{r}
data <- read_csv('../data/01_dat_load.tsv.gz')

columns_to_replace <- c("Glucose", "BloodPressure", "SkinThickness", "BMI","DiabetesPedigreeFunction", "Age")

data <- data |> 
  mutate_at(.vars = columns_to_replace, ~ifelse(. == 0, NA, .)) |>
  rename(BP = BloodPressure,
         Skin_thick = SkinThickness,
         DPF = DiabetesPedigreeFunction) |>
  mutate(Insulin = ifelse(Outcome == 0 & Insulin == 0, NA, Insulin))

View(data)

write_tsv(data, file = '../data/02_dat_clean.tsv.gz')
```

# Describe data

To address the description of the dataset, we are going calculate the basic statistics of the dataset, and also what they are about.

```{r}
summary(data)
```

# Augment data

```{R}
data <- read_csv('../data/02_dat_clean.tsv.gz')



write_tsv(data, file = '../data/03_dat_aug.tsv.gz')
```

# Analyse data

...
